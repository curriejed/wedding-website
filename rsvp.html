<section id="rsvp" class="card">
  <h2>RSVP</h2>
  <p>Please RSVP by <strong>[insert date]</strong>. We can‚Äôt wait to celebrate with you!</p>

  
  <form id="rsvpForm" class="rsvp-form">
  <div class="form-grid">
    <label class="form-field">
      <span class="label-text">Your name</span>
      <input type="text" name="name" placeholder="Full name" required />
    </label>

    <label class="form-field">
      <span class="label-text">Email</span>
      <input type="email" name="email" placeholder="you@example.com" required />
    </label>
  </div>

  <fieldset class="form-field">
    <legend class="label-text">Will you be attending?</legend>
    <div class="choice-row">
      <label class="choice-pill">
        <input type="radio" name="attending" value="Yes" required />
        <span>Yes üéâ</span>
      </label>
      <label class="choice-pill">
        <input type="radio" name="attending" value="No" />
        <span>No üò¢</span>
      </label>
    </div>
  </fieldset>

  <div class="form-grid">
    <label class="form-field">
      <span class="label-text">Number of guests</span>
      <select name="guest_count" required>
        <option value="">Choose‚Ä¶</option>
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
      </select>
    </label>

    <label class="form-field">
      <span class="label-text">Meal choice</span>
      <select name="meal" required>
        <option value="">Choose one‚Ä¶</option>
        <option value="Chicken">Chicken</option>
        <option value="Beef">Beef</option>
        <option value="Vegetarian">Vegetarian</option>
      </select>
    </label>
  </div>

  <fieldset class="form-field">
    <legend class="label-text">Dietary restrictions (if any)</legend>
    <div class="checkbox-grid">
      <label class="check-chip">
        <input type="checkbox" name="dietary" value="Gluten-free" />
        <span>Gluten-free</span>
      </label>
      <label class="check-chip">
        <input type="checkbox" name="dietary" value="Dairy-free" />
        <span>Dairy-free</span>
      </label>
      <label class="check-chip">
        <input type="checkbox" name="dietary" value="Nut allergy" />
        <span>Nut allergy</span>
      </label>
      <label class="check-chip">
        <input type="checkbox" name="dietary" value="Other" />
        <span>Other</span>
      </label>
    </div>
  </fieldset>

  <label class="form-field">
    <span class="label-text">Notes / allergies / anything else?</span>
    <textarea name="notes" rows="4" placeholder="Optional"></textarea>
  </label>

  <input type="text" name="_gotcha" style="display:none" />

  <button type="submit" class="submit-btn">
    Send RSVP
  </button>

  <p id="formStatus" class="form-status" aria-live="polite"></p>
</form>

</section>

<script>
  const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxRxJ0TxnBKGnUy7KaoM9x5GEcI7jM13agrjzR8HR8G8SVcU8SWC1Q8lQXOSzo8knP-/exec";
  const form = document.getElementById("rsvpForm");
  const statusEl = document.getElementById("formStatus");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    statusEl.textContent = "Sending‚Ä¶";

    try {
      const formData = new FormData(form);

      const res = await fetch(SCRIPT_URL, {
        method: "POST",
        body: formData,
      });

      const text = await res.text();
      // If response isn't JSON for some reason, still treat as success if HTTP ok
      if (res.ok) {
        statusEl.textContent = "Thanks! Your RSVP has been recorded ‚ù§Ô∏è";
        form.reset();
      } else {
        statusEl.textContent = "Hmm‚Äîsomething went wrong. Please try again.";
        console.error(text);
      }
    } catch (err) {
      statusEl.textContent = "Network error‚Äîplease try again.";
      console.error(err);
    }
  });
</script>
