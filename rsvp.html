<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>RSVP - Jed & Lauren's Wedding</title>

    <link rel="stylesheet" href="style.css" />
  </head>
  <body>

<header class="site-header">
      <h1>Jed & Lauren's Wedding</h1>
      <p></p>
      <nav class="nav">
        <a href="index.html">Home</a>
        <a href="rsvp.html">RSVP</a>
        <a href="qanda.html">Q&A</a>
      </nav>

    </header>

<section id="rsvp" class="card">
  <h2>RSVP</h2>
  <p>Please RSVP by <strong>[insert date]</strong>. We canâ€™t wait to celebrate with you!</p>

  
  <form id="rsvpForm" class="rsvp-form">
  <div class="form-grid">
    <label class="form-field">
      <span class="label-text">Your name</span>
      <input type="text" name="name" placeholder="Full name" required />
    </label>

    <label class="form-field">
      <span class="label-text">Email</span>
      <input type="email" name="email" placeholder="you@example.com" required />
    </label>
  </div>

  <fieldset class="form-field">
    <legend class="label-text">Will you be attending?</legend>
    <div class="choice-row">
      <label class="choice-pill">
        <input type="radio" name="attending" value="Yes" required />
        <span>Yes ðŸŽ‰</span>
      </label>
      <label class="choice-pill">
        <input type="radio" name="attending" value="No" />
        <span>No ðŸ˜¢</span>
      </label>
    </div>
  </fieldset>

    <label class="form-field">
      <span class="label-text">Meal choice</span>
      <select name="meal" required>
        <option value="">Choose oneâ€¦</option>
        <option value="Chicken">Chicken</option>
        <option value="Beef">Beef</option>
        <option value="Vegetarian">Vegetarian</option>
      </select>
    </label>
  </div>

   <label class="form-field">
    <span class="label-text">Notes / allergies / anything else?</span>
    <textarea name="notes" rows="4" placeholder="Optional"></textarea>
  </label>

  <input type="text" name="_gotcha" style="display:none" />

  <button type="submit" class="submit-btn">
    Send RSVP
  </button>

  <p id="formStatus" class="form-status" aria-live="polite"></p>
</form>

</section>

<script>
  const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbxRxJ0TxnBKGnUy7KaoM9x5GEcI7jM13agrjzR8HR8G8SVcU8SWC1Q8lQXOSzo8knP-/exec";
  const form = document.getElementById("rsvpForm");
  const statusEl = document.getElementById("formStatus");

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    statusEl.textContent = "Sendingâ€¦";

    try {
      const formData = new FormData(form);

      const res = await fetch(SCRIPT_URL, {
        method: "POST",
        body: formData,
      });

      const text = await res.text();
      // If response isn't JSON for some reason, still treat as success if HTTP ok
      if (res.ok) {
        statusEl.textContent = "Thanks! Your RSVP has been recorded";
        form.reset();
      } else {
        statusEl.textContent = "Hmmâ€”something went wrong. Please try again.";
        console.error(text);
      }
    } catch (err) {
      statusEl.textContent = "Network errorâ€”please try again.";
      console.error(err);
    }
  });
</script>
